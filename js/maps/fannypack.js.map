{"version":3,"sources":["arbiter.js"],"names":["Arbiter","n","r","e","t","i","s","version","updated_on","create","subscribe","u","c","f","o","l","a","p","b","h","g","v","arguments","length","priority","split","d","test","replace","id","self","options","push","sort","persist","y","call","publish","indexOf","concat","cancelable","unsubscribed","async","setTimeout","unsubscribe","resubscribe"],"mappings":"AAAA,GAAAA,SAAA,WAAA,GAAAC,GAAA,WAAA,GAAAC,MAAAC,KAAAC,KAAAC,KAAAC,EAAA,CAAA,QAAAC,QAAA,MAAAC,WAAA,aAAAC,OAAA,WAAA,MAAAR,MAAAS,UAAA,WAAA,GAAAT,GAAAU,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,KAAAC,GAAA,EAAAC,EAAA,EAAAC,IAAA,IAAAC,UAAAC,OAAA,EAAA,MAAA,KAAAZ,GAAAW,UAAA,GAAAP,EAAAO,UAAAA,UAAAC,OAAA,GAAAD,UAAAC,OAAA,IAAAL,EAAAI,UAAA,QAAAA,UAAAC,OAAA,IAAAP,EAAAM,UAAA,IAAAJ,EAAAM,WAAAJ,EAAAF,EAAAM,UAAA,gBAAAb,KAAAA,EAAAA,EAAAc,MAAA,UAAA,KAAA,GAAAC,GAAA,EAAAA,EAAAf,EAAAY,OAAAG,IAAA,GAAAzB,EAAAU,EAAAe,GAAA,MAAAC,KAAA1B,IAAAkB,GAAA,EAAAlB,EAAAA,EAAA2B,QAAA,MAAA,KAAAhB,EAAAT,EAAAF,MAAAE,EAAAF,GAAAW,QAAAA,EAAAV,EAAAD,MAAAC,EAAAD,GAAAW,MAAAK,EAAAX,IAAAQ,GAAAe,GAAAZ,EAAAJ,EAAAE,EAAAE,EAAAG,EAAAU,KAAAd,EAAAe,QAAAb,GAAAb,EAAAY,GAAAH,EAAAF,EAAAoB,KAAAlB,GAAAF,EAAAA,EAAAqB,KAAA,SAAAhC,EAAAC,GAAA,MAAAD,GAAAgB,EAAAf,EAAAe,GAAA,EAAAhB,EAAAgB,GAAAf,EAAAe,EAAA,EAAA,IAAAE,EAAAhB,EAAAF,GAAAW,EAAAV,EAAAD,GAAAW,EAAAS,EAAAW,KAAAf,IAAAC,EAAAgB,SAAA9B,EAAAH,GAAA,CAAAY,EAAAT,EAAAH,EAAA,KAAA,GAAAkC,GAAA,EAAAA,EAAAtB,EAAAU,OAAAY,IAAArB,EAAAD,EAAAuB,KAAAtB,EAAAgB,KAAAjB,EAAAsB,IAAAD,SAAA,IAAA,MAAAvB,GAAAY,OAAA,EAAAF,EAAAA,EAAA,IAAAgB,QAAA,SAAApC,EAAAI,EAAAC,GAAA,GAAAK,GAAAC,EAAAC,EAAAC,EAAA,GAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAAC,EAAAhB,EAAAD,MAAAK,GAAAA,KAAA,KAAAO,IAAAV,GAAA,GAAAF,EAAAqC,QAAAzB,KAAAK,EAAAA,EAAAqB,OAAApC,EAAAU,IAAA,KAAA,IAAAP,EAAA4B,UAAA9B,EAAAH,KAAAG,EAAAH,OAAAG,EAAAH,GAAA+B,KAAA3B,IAAA,GAAAa,EAAAK,OAAA,MAAAR,EAAA,kBAAAT,GAAAkC,aAAAxB,EAAAV,EAAAkC,WAAA,KAAA,GAAArB,GAAA,EAAAA,EAAAD,EAAAK,OAAAJ,IAAA,GAAAP,EAAAM,EAAAC,IAAAP,EAAA6B,aAAA,IAAA,IAAA,IAAAnC,EAAAoC,OAAA9B,EAAAmB,SAAAnB,EAAAmB,QAAAW,MAAAC,WAAA,SAAAzC,GAAA,MAAA,YAAAA,EAAAW,EAAAuB,KAAAlC,EAAA4B,KAAAzB,EAAAJ,EAAAgB,KAAAL,GAAAE,SAAA,IAAAH,EAAAC,EAAAC,EAAAuB,KAAAxB,EAAAkB,KAAAzB,EAAAJ,EAAAgB,GAAAD,IAAA,IAAAL,EAAA,MAAA,MAAAS,GAAAL,GAAA,EAAA,MAAAA,IAAA6B,YAAA,SAAA3C,GAAA,QAAAI,EAAAJ,KAAAI,EAAAJ,GAAAwC,cAAA,GAAA,IAAAI,YAAA,SAAA5C,GAAA,QAAAI,EAAAJ,KAAAI,EAAAJ,GAAAwC,cAAA,GAAA,KAAA,OAAAxC","file":"../fannypack.js","sourcesContent":["var Arbiter=function(){var n=function(){var r={},e={},t={},i={},s=1;return{version:\"1.0\",updated_on:\"2011-12-19\",create:function(){return n()},subscribe:function(){var n,u,c,f,o,l,a,p,b={},h=!1,g=0,v=[];if(arguments.length<2)return null;u=arguments[0],l=arguments[arguments.length-1],arguments.length>2&&(b=arguments[1]||{}),arguments.length>3&&(a=arguments[2]),b.priority&&(g=b.priority),\"string\"==typeof u&&(u=u.split(/[,\\s]+/));for(var d=0;d<u.length;d++)if(n=u[d],/\\*$/.test(n)?(h=!0,n=n.replace(/\\*$/,\"\"),c=e[n],c||(e[n]=c=[])):(c=r[n],c||(r[n]=c=[])),p=s++,o={id:p,f:l,p:g,self:a,options:b},i[p]=o,c.push(o),c=c.sort(function(n,r){return n.p>r.p?-1:n.p==r.p?0:1}),h?e[n]=c:r[n]=c,v.push(p),!b.persist&&t[n]){f=t[n];for(var y=0;y<f.length;y++)o.f.call(o.self,f[y],{persist:!0})}return u.length>0?v:v[0]},publish:function(n,i,s){var u,c,f,o=10,l=!0,a=!0,p={},b=r[n]||[];s=s||{};for(f in e)0==n.indexOf(f)&&(b=b.concat(e[f]));if(s.persist===!0&&(t[n]||(t[n]=[]),t[n].push(i)),0==b.length)return l;\"boolean\"==typeof s.cancelable&&(a=s.cancelable);for(var h=0;h<b.length;h++)if(c=b[h],!c.unsubscribed)try{if(s.async===!0||c.options&&c.options.async)setTimeout(function(r){return function(){r.f.call(r.self,i,n,p)}}(c),o++);else if(u=c.f.call(c.self,i,n,p),a&&u===!1)break}catch(g){l=!1}return l},unsubscribe:function(n){return!!i[n]&&(i[n].unsubscribed=!0,!0)},resubscribe:function(n){return!!i[n]&&(i[n].unsubscribed=!1,!0)}}};return n()}();\n"]}